html, body {
  overscroll-behavior: contain;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: Arial, sans-serif;
  background-color: #ffffff;
  margin: 0;
  padding: 0;
}

.container {
  width: 90%;
  max-width: 520px;
  margin: 20px auto;
  padding: 20px;
  border-radius: 10px;
  background: #f9f9f9;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  text-align: center;
  position: relative;
}

h1 {
  margin-bottom: 10px;
}

/* 入力欄コンテナ */
.input-container {
  position: relative;
  margin-bottom: 10px;
}

.input-container input[type="text"] {
  width: 100%;
  padding: 10px;
  padding-right: 40px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

.input-clear-btn {
  position: absolute;
  top: 50%;
  right: 8px;
  transform: translateY(-50%);
  width: 28px;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  border-radius: 50%;
  background: transparent;
  border: none;
  color: #888;
  cursor: pointer;
}
.input-clear-btn:hover {
  background-color: lightgray;
}

button {
  padding: 12px;
  width: 100%;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
}
button:hover {
  background-color: #0056b3;
}

.admin-button {
  background-color: #d3d3d3;
  margin-bottom: 10px;
  padding: 10px 20px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  display: inline-block;
  width: auto;
  text-align: center;
  font-size: 14px;
}
.admin-button:hover {
  background-color: #555;
}

.privacy-note {
  margin-top: 10px;
  font-weight: bold;
}

#suggestions {
  margin-top: 10px;
  max-height: 200px;
  overflow-y: auto;
}

.suggestion-item {
  display: flex;
  align-items: center;
  padding: 10px;
  border: 1px solid rgba(0,0,0,0.1);
  border-radius: 10px;
  margin-bottom: 5px;
  cursor: pointer;
  transition: background 0.3s;
}
.suggestion-item:hover {
  background-color: rgba(0,0,0,0.05);
}
.suggestion-item img {
  width: 50px;
  height: 50px;
  border-radius: 5px;
  margin-right: 10px;
}

/* --- Artist search: artist list (list view) --- */
.artist-list{display:flex;flex-direction:column;gap:6px;}
.artist-row{
  display:flex;align-items:center;gap:10px;
  width:100%;
  padding:10px;
  border:1px solid rgba(0,0,0,0.1);
  border-radius:12px;
  background:#fff;
  cursor:pointer;
  text-align:left;
}
.artist-row:hover{background-color:rgba(0,0,0,0.05);}
.artist-row:active{transform:scale(.99);}
.artist-avatar{
  width:42px;height:42px;
  border-radius:10px;
  object-fit:cover;
  background:#eee;
  flex:0 0 auto;
}
.artist-avatar.ph{
  display:flex;align-items:center;justify-content:center;
  font-size:18px;color:#555;
}
.artist-meta{min-width:0;flex:1;}
.artist-name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.artist-hint{font-size:12px;opacity:.7;margin-top:2px;}
.artist-go{font-size:22px;opacity:.35;flex:0 0 auto;margin-left:8px;}

.selected-item {
  margin-bottom: 10px;
  font-weight: bold;
  text-align: center;
  background: #f0f0f0;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 10px;
}

.clear-btn, .input-clear-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 20px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: #333;
  transition: background-color 0.2s ease;
}
.clear-btn:hover, .input-clear-btn:hover {
  background-color: lightgray;
}

.count-badge {
  background-color: #ff6b6b;
  color: white;
  font-weight: bold;
  padding: 4px 8px;
  border-radius: 5px;
  margin-right: 10px;
}

/* 統合された再生・音量ボタン */
.control-btn {
  width: 40px;
  height: 40px;
  background: none;
  border: none;
  margin-left: 8px;
  cursor: pointer;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.control-btn:hover {
  background-color: lightgray;
}
.control-btn svg {
  pointer-events: none;
  width: 24px;
  height: 24px;
  fill: #888;
}

/* Apple Music風の音量スライダー */
.volume-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 120px;
  height: 4px;
  background: #ccc;
  border-radius: 2px;
  outline: none;
  margin-left: 8px;
}
.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  background: #888;
  border-radius: 50%;
  cursor: pointer;
  margin-top: -5px;
}
.volume-slider::-moz-range-thumb {
  width: 14px;
  height: 14px;
  background: #888;
  border-radius: 50%;
  cursor: pointer;
}

/* 検索モード切替ボタン */
#modeSong, #modeArtist {
  flex: 1;
  font-size: 14px;
  padding: 6px 8px;
  margin: 0 2px;
  border: 1px solid #ccc;
  background-color: #f0f0f0;
  color: #333;
  border-radius: 5px;
  cursor: pointer;
  outline: none;
}
#modeSong:hover, #modeArtist:hover {
  background-color: #e0e0e0;
}

/* 再検索ボタン */
#reSearchSongMode, #reSearchArtistMode {
  margin: 10px 0;
  display: block;
}
#reSearchSongMode button, #reSearchArtistMode button {
  font-size: 14px;
  padding: 6px 8px;
  border: 1px solid #ccc;
  background-color: #f0f0f0;
  color: #333;
  border-radius: 5px;
  cursor: pointer;
  outline: none;
}
#reSearchSongMode button:hover, #reSearchArtistMode button:hover {
  background-color: #e0e0e0;
}

.button-container {
  display: flex;
  justify-content: flex-start;
  margin-bottom: 10px;
}

.spinner {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #3498db;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
  display: none;
  margin-left: 10px;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

#selectedLabel {
  margin-top: 16px;
  margin-bottom: 16px;
  text-align: center;
  font-size: 16px;
  color: #555;
}

/* ロード中UI */
#loadingIndicator {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: rgba(255,255,255,0.7);
  border-radius: 10px;
  padding: 20px;
}
.loading-spinner {
  border: 6px solid #f3f3f3;
  border-top: 6px solid #888;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
  margin-bottom: 10px;
}
.loading-text {
  color: #888;
  font-size: 14px;
}

@media (max-width: 600px) {
  .container, form, textarea, input[type="text"] {
    width: 95%;
  }
  button {
    font-size: 16px;
    padding: 10px;
  }
  #modeSong, #modeArtist, #reSearchSongMode button, #reSearchArtistMode button {
    font-size: 12px;
    padding: 4px 5px;
  }
}


/* === 横スクロールのカード型結果（最大5枚表示） === */
.carousel-wrap { 
  margin: 10px 0 12px;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 8px 4px 14px;
  -webkit-overflow-scrolling: touch;
  perspective: 1000px;
}
.carousel-wrap::-webkit-scrollbar { height: 8px; }
.carousel-wrap::-webkit-scrollbar-thumb { background: rgba(0,0,0,.2); border-radius: 999px; }

.carousel-track {
  display: flex;
  gap: 12px;
  align-items: stretch;
  scroll-snap-type: x mandatory;
}

.result-card {
  flex: 0 0 auto;
  width: clamp(140px, 18vw, 220px); /* 5枚程度見える幅 */
  scroll-snap-align: center;
  background: #fff;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 16px;
  box-shadow: 0 4px 14px rgba(0,0,0,.06);
  padding: 10px 10px 14px;
  transform-origin: center bottom;
  transform-style: preserve-3d;
  transition: transform .25s ease, opacity .25s ease, box-shadow .25s ease;
  opacity: .85;
  text-align: center;
  user-select: none;
}
.result-card.selected {
  box-shadow: 0 12px 28px rgba(0,0,0,.18);
  opacity: 1;
}
.result-card img.cover {
  width: 100%;
  height: auto;
  aspect-ratio: 1/1;
  border-radius: 12px;
  object-fit: cover;
  background: #eee;
  display: block;
}
.result-card .title {
  margin-top: 8px;
  font-weight: 700;
  font-size: 14px;
  line-height: 1.25;
}
.result-card .artist {
  margin-top: 4px;
  font-size: 12px;
  color: #555;
}

/* === 再生UI === */
.player-controls {
  margin: 8px 0 0;
  padding: 10px 12px;
  background: #fff;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,.06);
}
.player-top, .player-bottom {
  display: flex;
  align-items: center;
  gap: 8px;
}
.player-top {
  margin-bottom: 8px;
}
#playPauseBtn, #volumeBtn {
  width: 40px; height: 40px;
  border-radius: 50%;
  border: 1px solid #ddd;
  background: #f8f8f8;
  cursor: pointer;
}
#seekBar {
  flex: 1;
  -webkit-appearance: none;
  appearance: none;
  height: 4px;
  background: #ddd;
  border-radius: 2px;
  outline: none;
}
#seekBar::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px; height: 14px;
  border-radius: 50%;
  background: #888;
  cursor: pointer;
  margin-top: -5px;
}
.time-label {
  min-width: 88px;
  text-align: right;
  font-size: 12px;
  color: #555;
}

/* 3Dカードの動き（JSで CSS var を設定） */
.result-card {
  transform: perspective(1000px) rotateY(var(--ry, 0deg)) scale(var(--scale, 1));
}


/* --- Adjust carousel to avoid frame-out within narrow containers --- */
.carousel-wrap {
  width: 100%;
  max-width: 100%;
  padding-inline: 8px;
}

/* Apple Music-ish controls */
.player-controls {
  border-radius: 14px;
  background: #fbfbfd;
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 8px 24px rgba(0,0,0,.06);
}
.player-top, .player-bottom { gap: 10px; }
#playPauseBtn, #volumeBtn {
  width: 44px; height: 44px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.12);
  background: #fff;
}
#playPauseBtn:hover, #volumeBtn:hover { background: #f2f2f7; }

/* Sliders: thin, rounded */
#seekBar, .volume-slider {
  height: 4px;
  background: #d2d2d7;
  border-radius: 999px;
}
#seekBar::-webkit-slider-thumb, .volume-slider::-webkit-slider-thumb {
  width: 14px; height: 14px;
  border-radius: 50%;
  background: #1d1d1f;
}

/* Snap polish */
.carousel-wrap { scroll-snap-type: x mandatory; }
.result-card { scroll-snap-align: center; }


/* === Carousel viewport: taller, centered (上下左右中央) === */
.carousel-wrap{
  display: grid;
  place-items: center;
  height: clamp(280px, 42vh, 480px);
  padding: 8px 6px 16px;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  perspective: 1000px;
}
.carousel-track{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  scroll-snap-type: x mandatory;
  min-height: 100%;
}

/* === Cards: 正方形重視／背景ベタ塗り廃止／ジャケット尊重 === */
.result-card{
  flex: 0 0 auto;
  width: clamp(84px, 16vw, 128px);
  scroll-snap-align: center;
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  transform-origin: center bottom;
  transform-style: preserve-3d;
  transition: transform .25s ease, opacity .25s ease;
  opacity: .9;
  text-align: center;
  user-select: none;
}
.result-card.selected{ opacity: 1; }

.result-card img.cover{
  width: 100%;
  height: auto;
  aspect-ratio: 1 / 1;
  border-radius: 12px;
  object-fit: cover;
  display: block;
  box-shadow: 0 8px 22px rgba(0,0,0,.20);
}
.result-card .title{
  margin-top: 6px;
  font-weight: 700;
  font-size: 13px;
  line-height: 1.25;
}
.result-card .artist{
  margin-top: 2px;
  font-size: 11px;
  color: #666;
}

/* 3D/スケール：中央(選択)をやや大、左右は少し小さく */
.result-card{ transform: perspective(1000px) rotateY(var(--ry, 0deg)) scale(var(--scale, .86)); }
.result-card.selected{ transform: perspective(1000px) rotateY(0deg) scale(1.02); }

/* === Player: Apple Musicライク、上下それぞれ中央揃え === */
.player-controls{
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 10px 0 4px;
}
.player-top, .player-bottom{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}
#playPauseBtn, #volumeBtn{
  width: 44px; height: 44px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.12);
  background: #fff;
  cursor: pointer;
}
#playPauseBtn:hover, #volumeBtn:hover{ background: #f2f2f7; }

#seekBar, #volumeBar{
  -webkit-appearance: none; appearance: none;
  width: min(420px, 82%);
  height: 4px;
  background: #d2d2d7;
  border-radius: 999px;
  outline: none;
}
#seekBar::-webkit-slider-thumb, #volumeBar::-webkit-slider-thumb{
  -webkit-appearance: none; appearance: none;
  width: 14px; height: 14px;
  border-radius: 50%;
  background: #1d1d1f;
  margin-top: -5px;
}
.time-label{ min-width: 96px; text-align: right; font-size: 12px; color: #555; }

@media (max-width: 420px){
  .result-card{ width: clamp(72px, 18vw, 108px); }
}


/* === Carousel viewport: taller & fully centered === */
.carousel-wrap{
  display:grid;
  place-items:center;
  height: clamp(320px, 50vh, 560px); /* 縦幅をしっかり確保 */
  padding: 8px 8px 16px;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
  perspective:1000px;
  scrollbar-width:none;          /* Firefox: スクロールバー非表示 */
  -ms-overflow-style:none;       /* IE/Edge旧: 非表示 */
}
.carousel-wrap::-webkit-scrollbar{ display:none; } /* WebKit: 非表示 */

.carousel-track{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  scroll-snap-type:x mandatory;
  min-height:100%;
}
.edge-spacer{ flex:0 0 auto; }

/* --- Cards: 正方形重視・画像主役・約5枚表示 --- */
.result-card{
  flex:0 0 auto;
  width: clamp(90px, 15vw, 128px);
  scroll-snap-align:center;
  background:transparent;
  border:none;
  box-shadow:none;
  padding:0;
  transform-origin:center bottom;
  transform-style:preserve-3d;
  transition: transform .25s ease, opacity .25s ease;
  opacity:.92;
  text-align:center;
  user-select:none;
}
.result-card img.cover{
  width:100%;
  height:auto;
  aspect-ratio:1/1;
  border-radius:12px;
  object-fit:cover;
  display:block;
  box-shadow:0 8px 22px rgba(0,0,0,.20);
}
/* タイトル・アーティスト中央寄せ控えめ */
.result-card .title{ margin-top:6px; font-weight:700; font-size:13px; line-height:1.25; }
.result-card .artist{ margin-top:2px; font-size:11px; color:#666; }

/* 3D/スケーリング：中央(選択)は大きく、左右は小さめ */
.result-card{ transform: perspective(1000px) rotateY(var(--ry,0deg)) scale(var(--scale,.80)); }
.result-card.selected{ transform: perspective(1000px) rotateY(0deg) scale(1.12); }
.result-card.selected img.cover{ outline:3px solid rgba(255,255,255,.9); outline-offset:-2px; }

/* === Player: Apple Music風（中央揃え、同長さ） === */
.player-controls{ background:transparent; border:none; box-shadow:none; padding: 10px 0 4px; }
.player-top, .player-bottom{ display:flex; align-items:center; justify-content:center; gap:12px; }

/* プレイ＆ボリュームアイコン：塗りつぶし廃止／同サイズ */
#playPauseBtn, #volumeBtn{
  width:44px; height:44px;
  border:none; background:transparent; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center;
  font-size:20px; line-height:1;
}

/* シーク・音量バー：同じ長さ・少し太く・サム非表示 */
#seekBar, #volumeBar{
  -webkit-appearance:none; appearance:none;
  width: min(520px, 86%);
  height: 6px; /* ほんの少し太く */
  background:#d2d2d7;
  border-radius:999px;
  outline:none;
  transition: transform .08s ease;
}
#seekBar.active, #volumeBar.active{ transform: scaleY(1.15); }

/* つまみは視覚的に削除（可視0） */
#seekBar::-webkit-slider-thumb, #volumeBar::-webkit-slider-thumb{
  -webkit-appearance:none; appearance:none;
  width:0; height:0; background:transparent; border:none;
}
#seekBar::-moz-range-thumb, #volumeBar::-moz-range-thumb{
  width:0; height:0; background:transparent; border:none;
}

.time-label{ min-width:96px; text-align:right; font-size:12px; color:#555; }


/* === Override: Carousel height a bit smaller & center === */
.carousel-wrap{
  display:grid;
  place-items:center;
  height: clamp(260px, 46vh, 520px);
}

/* === Cards emphasis & selection ring === */
.result-card{ transform: perspective(1000px) rotateY(var(--ry,0deg)) scale(var(--scale,.78)); }
.result-card.selected{ transform: perspective(1000px) rotateY(0deg) scale(1.18); }
.result-card.selected img.cover{ outline:3px solid rgba(255,255,255,.95); outline-offset:-2px; } /* 正方形の輪郭 */

/* === Player buttons: gray & clearer, no filled circle === */
#playPauseBtn, #volumeBtn{
  width:44px; height:44px;
  background: transparent !important;
  border: none !important;
  color: #4b5563;   /* 灰色で視認性を確保 */
  font-size: 22px;
}

/* === Unified bars (seek & volume): same length, thicker a bit, no thumb === */
#seekBar, #volumeBar{
  -webkit-appearance: none; appearance: none;
  width: min(520px, 86%);
  height: 6px; /* 少し太く */
  border-radius: 999px;
  outline: none;
  background: linear-gradient(to right, #6b7280 0%, #6b7280 var(--prog, 0%), #d2d2d7 var(--prog, 0%), #d2d2d7 100%);
  transition: transform .08s ease;
}
#seekBar:active, #volumeBar:active{ transform: scaleY(1.12); }
#seekBar::-webkit-slider-thumb, #volumeBar::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:0; height:0; background:transparent; border:none; }
#seekBar::-moz-range-thumb,   #volumeBar::-moz-range-thumb{ width:0; height:0; background:transparent; border:none; }

/* Align player rows to center and same width ends */
.player-top, .player-bottom{ justify-content:center; }


/* === Final overrides (v6) === */

/* Carousel: smaller height suitable for current card size; container-centered; snap enabled */
.carousel-wrap{
  display:grid;
  place-items:center;
  height: clamp(210px, 38vh, 380px);
  scroll-snap-type: x mandatory;
}
.carousel-track{ align-items:center; }

/* Cards: slightly larger than before but fit ≈5, image-respecting */
.result-card{
  width: clamp(105px, 20vw, 150px);
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  transform: perspective(1000px) rotateY(var(--ry,0deg)) scale(var(--scale,.82));
  opacity: .95;
}
.result-card img.cover{
  box-shadow: 0 8px 22px rgba(0,0,0,.20);
  outline: 3px solid transparent;
  outline-offset: -2px;
}
.result-card.selected{ transform: perspective(1000px) rotateY(0deg) scale(1.22); }
.result-card.selected img.cover{ outline-color: rgba(255,255,255,.95); }

/* Player icons: gray glyph, no fill */
#playPauseBtn, #volumeBtn{
  background: transparent !important;
  border: none !important;
  color: #4b5563 !important; /* gray glyph */
  width: 44px; height: 44px;
  font-size: 22px;
}

/* Bars: same length & aligned; darker progress; draggable anywhere; 0.05s hold visual */
#seekBar, #volumeBar{
  -webkit-appearance: none; appearance: none;
  display: block;
  width: min(520px, 86%);
  height: 6px;
  margin-left: auto; margin-right: auto;
  border-radius: 999px;
  background: linear-gradient(to right, #6b7280 0%, #6b7280 var(--prog, 0%), #d2d2d7 var(--prog, 0%), #d2d2d7 100%);
  outline: none;
  transition: transform .06s ease;
}
#seekBar.active, #volumeBar.active{ transform: scaleY(1.12); }
#seekBar::-webkit-slider-thumb, #volumeBar::-webkit-slider-thumb{ -webkit-appearance:none; width:0; height:0; background:transparent; border:none; }
#seekBar::-moz-range-thumb, #volumeBar::-moz-range-thumb{ width:0; height:0; background:transparent; border:none; }

.player-top, .player-bottom{ justify-content: center; }

/* Mobile fine-tune */
@media (max-width: 480px){
  .carousel-wrap{ height: clamp(200px, 42vh, 340px); }
  .result-card{ width: clamp(100px, 22vw, 140px); }
}


/* === Swipe polish & sizing from card size (v7) === */
.carousel-wrap{
  --card: clamp(92px, 18vw, 132px);
  display:grid;
  place-items:center;
  height: calc(var(--card) + 88px);
  touch-action: pan-x;
  overscroll-behavior-x: contain;
  scroll-snap-type: x mandatory;
}
.carousel-track{ align-items:center; justify-content:center; gap: 12px; }

@media (max-width: 600px){
  .carousel-wrap{ --card: clamp(84px, 22vw, 120px); height: calc(var(--card) + 84px); }
}
@media (min-width: 1024px){
  .carousel-wrap{ --card: clamp(104px, 14vw, 148px); height: calc(var(--card) + 92px); }
}

.result-card{ width: var(--card) !important; transform: perspective(1000px) rotateY(var(--ry,0deg)) scale(var(--scale,.82)); }
.result-card.selected{ transform: perspective(1000px) rotateY(0deg) scale(1.26); }
.result-card img.cover{ aspect-ratio: 1/1; display:block; }
.carousel-wrap, .carousel-track{ width:100%; max-width:100%; }
.carousel-wrap{ padding-inline: 8px; }

.noselect, #playPauseBtn, #volumeBtn, #timeLabel{
  -webkit-user-select: none; user-select: none;
  -webkit-touch-callout: none;
}
#playPauseBtn, #volumeBtn{
  background: transparent !important;
  border: none !important;
  color: #4b5563 !important;
  width: 44px; height: 44px;
  font-size: 22px;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

#seekBar, #volumeBar{
  -webkit-appearance: none; appearance: none;
  display:block;
  width: min(520px, 86%);
  height: 6px;
  margin: 0 auto;
  border-radius: 999px;
  background: linear-gradient(to right, #6b7280 0%, #6b7280 var(--prog, 0%), #d2d2d7 var(--prog, 0%), #d2d2d7 100%);
  outline: none;
  transition: transform .06s ease;
  touch-action: none;
}
#seekBar.active, #volumeBar.active{ transform: scaleY(1.12); }
#seekBar::-webkit-slider-thumb, #volumeBar::-webkit-slider-thumb{ -webkit-appearance:none; width:0; height:0; background:transparent; border:none; }
#seekBar::-moz-range-thumb, #volumeBar::-moz-range-thumb{ width:0; height:0; background:transparent; border:none; }

.player-top, .player-bottom{ justify-content:center; }
.carousel-wrap{ place-items:center; }


/* === v9: vertical centering, selected-based height, player position tweak === */
.carousel-wrap{
  --card: clamp(90px, 16vw, 130px);
  --sel: 1.30;
  --nsel: 0.72;
  display:grid;
  place-items:center;
  height: calc(var(--card) * var(--sel) + 88px);
  overflow-x:auto;
  overflow-y:hidden;
  scroll-snap-type:x mandatory;
}
.carousel-track{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  min-height:100%;
}
.result-card{
  width: var(--card) !important;
  transform-origin:center bottom;
  transform: perspective(1000px) rotateY(var(--ry,0deg)) scale(var(--nsel));
  background:transparent !important;
  border:none !important;
  box-shadow:none !important;
  scroll-snap-align:center;
  padding:10px 10px 14px;
  transition: transform .24s ease;
}
.result-card.selected{ transform: perspective(1000px) rotateY(0deg) scale(var(--sel)); }
.result-card img.cover{ aspect-ratio:1/1; border-radius:14px; display:block; width:100%; box-shadow:0 8px 20px rgba(0,0,0,.18); }
.result-card.selected img.cover{ box-shadow:0 0 0 3px rgba(255,255,255,.60), 0 14px 28px rgba(0,0,0,.28); }

.result-card .title{ margin-top:8px; font-weight:700; font-size:14px; line-height:1.25; }
.result-card .artist{ margin-top:4px; font-size:12px; color:#555; }

@media (max-width: 600px){
  .carousel-wrap{ --card: clamp(78px, 21vw, 112px); height: calc(var(--card) * var(--sel) + 80px); }
}
@media (min-width: 1024px){
  .carousel-wrap{ --card: clamp(100px, 14vw, 144px); height: calc(var(--card) * var(--sel) + 90px); }
}

/* player a bit higher */
.player-controls{ margin-top: 8px !important; }

/* === v9.1: ensure each .result-card is vertically centered in the carousel viewport === */
.carousel-wrap{
  display: grid;
  place-items: center;
}
.carousel-track{
  display: flex;
  align-items: center !important; /* vertically center cards along cross-axis */
  height: 100%;
  min-height: 100%;
}
.result-card{
  align-self: center; /* explicit per-card vertical centering within the track */
}

/* === v9.2 selected scale tweak & stronger vertical centering === */
.carousel-wrap .result-card.selected{
  transform: perspective(1000px) rotateY(0deg) scale(1.24) !important; /* 以前よりほんの少しだけ小さく */
}
.carousel-track{
  align-items: center !important; /* 各カードがトラック内で上下中央 */
}
.result-card{
  align-self: center; /* 念のためカード個別でも上下中央 */
}


/* --- Theme banner (main page) --- */
.theme-banner{
  margin: 10px 0 14px;
  padding: 12px 14px;
  border-radius: 16px;
  background: rgba(255,255,255,.88);
  border: 1px solid rgba(0,0,0,.10);
  box-shadow: 0 10px 26px rgba(0,0,0,.10);
  backdrop-filter: blur(10px);
}
.theme-banner-head{display:flex;justify-content:space-between;gap:10px;align-items:flex-start;flex-wrap:wrap;}
.theme-banner-title{font-weight:800;font-size:16px;}
.theme-banner-period{opacity:.8;font-size:12px;}
.theme-banner-desc{margin-top:6px;opacity:.92;font-size:13px;line-height:1.45;}
.theme-banner-actions{margin-top:10px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;}
.theme-vote-btn{
  display:inline-block;
  padding:10px 14px;
  border-radius: 14px;
  background: #1e3a8a;
  color:#fff;
  text-decoration:none;
  font-weight:700;
}
.theme-banner-note{opacity:.75;font-size:12px;}

/* --- Artist list (artist mode phase 0) --- */
.artist-list{display:flex;flex-direction:column;gap:8px;}
.artist-list-item{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(0,0,0,.12);
  background: rgba(255,255,255,.92);
  cursor:pointer;
  text-align:left;
}
.artist-list-item:hover{transform: translateY(-1px);}
.artist-list-item img{width:40px;height:40px;border-radius:10px;object-fit:cover;flex:0 0 auto;}
.artist-list-item .name{font-weight:800;}
.artist-list-item .sub{opacity:.75;font-size:12px;margin-top:2px;}
